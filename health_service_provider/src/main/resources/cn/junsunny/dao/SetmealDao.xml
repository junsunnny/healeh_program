<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.junsunny.Dao.SetmealDao">

    <!--添加套餐-->
    <insert id="addSetMeal"
            parameterType="cn.junsunny.pojo.Setmeal">
        <selectKey resultType="java.lang.Integer"
                   keyProperty="id"
                   order="AFTER">
            select LAST_INSERT_ID()
        </selectKey>
        insert into t_setmeal
            (code,name,sex,age,helpCode,price,
            remark,attention,img)
        values
            (#{code},#{name},#{sex},#{age},#{helpCode},#{price},
            #{remark},#{attention},#{img})
    </insert>

    <!--设置套餐管理和检查组之间的关联关系-->
    <insert id="setSetmealAndCheckGroup" parameterType="hashmap">
        insert into
            t_setmeal_checkgroup
                (setmeal_id, checkgroup_id)
        value
            (#{setMealId},#{checkGroupId})
    </insert>

    <!--分页查询套餐管理-->
    <select id="selectByCondition"
            resultType="cn.junsunny.pojo.Setmeal"
            parameterType="String">
        select * from t_setmeal
        <if test="value != null and value.length > 0">
            where
                code like concat('%', #{value} ,'%')
                or name like concat('%', #{value} ,'%')
                or helpCode like concat('%', #{value} ,'%')
        </if>
    </select>


</mapper>